export type Lang = 'fr' | 'en'

const dict: Record<Lang, Record<string, string>> = {
  fr: {
    footer_version_prefix: 'VestyWinBox',
    footer_last_update: 'Dernière mise à jour',
    app_portable_title: 'Applications Portables',
    software_title: 'Gestion des Logiciels',
    choco_title: 'Chocolatey',
    choco_subtitle: 'Gestionnaire de paquets Windows avec terminal intégré',
    choco_terminal: 'Terminal Chocolatey',
    system_manager_subtitle: 'Gestionnaire Système Windows',
    repair_choco: 'Réparer Chocolatey',
    convert_missing_tools: 'Outils manquants',
    install_all: 'Installer tout',
    install: 'Installer',
    uninstall: 'Désinstaller',
    update: 'Mettre à jour',
    update_all: 'Tout mettre à jour',
    installed_packages: 'Paquets installés',
    available_updates: 'Mises à jour disponibles',
    details: 'Détails',
    open: 'Ouvrir',
    diagnostic: 'Diagnostic',
    diagnostic_choco: 'Diagnostic Chocolatey',
    search_placeholder: 'Rechercher…',
    search_packages: 'Rechercher des paquets',
    all_categories: 'Toutes les catégories',
    refresh: 'Actualiser',
    no_software_found: 'Aucun logiciel trouvé',
    try_adjust_filters: 'Essayez de modifier vos critères de recherche',
    search: 'Rechercher',
    searching: 'Recherche…',
    exact_match: 'Exact (id exact)',
    hide_variants: 'Masquer les variantes',
    hide_variants_desc: 'Masquer variantes (.install, .portable, .nightly, skins)',
    only_prerelease: 'Pré‑release seulement',
    maintainer: 'Mainteneur',
    filter_by_maintainer: 'Filtrer par mainteneur',
    maintainer_placeholder: 'ex: Microsoft',
    sort_name: 'Trier: Nom',
    sort_update: 'Trier: Priorité MAJ',
    updates_only: 'Mises à jour seulement',
    no_installed_packages: 'Aucun paquet installé',
    all_up_to_date: 'Tout est à jour',
    choco_command_placeholder: 'choco upgrade all -y',
    enter_choco_command: 'Saisir une commande Chocolatey',
    stop: 'Stopper',
    rerun: 'Relancer',
    rerun_last: 'Relancer la dernière commande',
    add_favorite: 'Ajouter aux favoris',
    favorites: 'Favoris',
    remove: 'Supprimer',
    installing: 'Installation…',
    install_chocolatey: 'Installer Chocolatey',
    apply: 'Appliquer',
    cancel: 'Annuler',
    close: 'Fermer',
    execute: 'Exécuter',
    execute_admin: 'Exécuter (Admin)',
    copy: 'Copier',
    export: 'Exporter',
    clear: 'Effacer',
    results: 'résultat(s)',
    none: 'Aucun',
    ok: 'OK',
    error: 'Erreur',
    success: 'Succès',
    tab_search: 'Recherche',
    tab_installed: 'Installés',
    tab_outdated: 'Obsolètes',
    tab_terminal: 'Terminal',
    // Settings
    settings_title: 'Paramètres',
    settings_subtitle: 'Thèmes, chemins par défaut et préférences',
    settings_theme: 'Thème',
    theme_fixed: 'Fixe',
    theme_follow: 'Suivre Windows',
    theme_custom: 'Custom',
    theme_bg: 'Fond',
    theme_cards: 'Cartes',
    theme_border: 'Bordure',
    theme_text: 'Texte',
    theme_text_muted: 'Texte secondaire',
    theme_icons: 'Icônes',
    theme_accent_start: 'Accent début',
    theme_accent_end: 'Accent fin',
    pick_color_accent_start: 'Choisir la couleur accent début',
    pick_color_accent_end: 'Choisir la couleur accent fin',
    reset: 'Réinitialiser',
    preview: 'Prévisualiser',
    export_preset: 'Exporter le preset',
    import_preset: 'Importer un preset',
    default_paths: 'Chemins par défaut',
    browse: 'Parcourir…',
    conversions_dir: 'Dossier de conversions',
    apply_paths_on_startup: 'Appliquer ces chemins au démarrage (si définis)',
    preferences: 'Préférences',
    lock_sidebar: 'Verrouiller la barre latérale',
    save_and_apply: 'Enregistrer et appliquer',
    // Dashboard quick actions
    dashboard_tagline: 'Centre de contrôle système • Outils, analytics, portables',
    quick_portable_apps: 'Apps Portables',
    quick_godmode: 'God Mode',
    quick_chocolatey: 'Chocolatey',
    quick_converter: 'Convertisseur',
    // PortableApps
    import_exe: 'Importer .EXE',
    no_portable_apps: 'Aucune app portable trouvée',
    launch_log: 'Journal des lancements',
    api_unavailable: 'API Electron non disponible',
    choco_not_installed: "Chocolatey n'est pas installé",
    choco_install_hint: "Cliquez pour l'installer en mode administrateur",
    wu_pause_planned: 'Windows Update (pause planifiée)',
    duration: 'Durée',
    schedule: 'Planifier',
    no_drives: 'Aucun lecteur détecté',
    action_log: 'Journal des actions',
    export_csv: 'Exporter CSV',
    no_exclusions: 'Aucune exclusion',
  },
  en: {
    footer_version_prefix: 'VestyWinBox',
    footer_last_update: 'Last update',
    app_portable_title: 'Portable Applications',
    software_title: 'Software Manager',
    choco_title: 'Chocolatey',
    choco_subtitle: 'Windows package manager with integrated terminal',
    choco_terminal: 'Chocolatey Terminal',
    system_manager_subtitle: 'Windows System Manager',
    repair_choco: 'Repair Chocolatey',
    convert_missing_tools: 'Missing tools',
    install_all: 'Install all',
    install: 'Install',
    uninstall: 'Uninstall',
    update: 'Update',
    update_all: 'Update all',
    installed_packages: 'Installed packages',
    available_updates: 'Available updates',
    details: 'Details',
    open: 'Open',
    diagnostic: 'Diagnostics',
    diagnostic_choco: 'Chocolatey Diagnostics',
    search_placeholder: 'Search…',
    search_packages: 'Search packages',
    all_categories: 'All categories',
    refresh: 'Refresh',
    no_software_found: 'No software found',
    try_adjust_filters: 'Try adjusting your filters',
    search: 'Search',
    searching: 'Searching…',
    exact_match: 'Exact match (id)',
    hide_variants: 'Hide variants',
    hide_variants_desc: 'Hide variants (.install, .portable, .nightly, skins)',
    only_prerelease: 'Prerelease only',
    maintainer: 'Maintainer',
    filter_by_maintainer: 'Filter by maintainer',
    maintainer_placeholder: 'e.g. Microsoft',
    sort_name: 'Sort: Name',
    sort_update: 'Sort: Update priority',
    updates_only: 'Updates only',
    no_installed_packages: 'No installed packages',
    all_up_to_date: 'All up to date',
    choco_command_placeholder: 'choco upgrade all -y',
    enter_choco_command: 'Enter a Chocolatey command',
    stop: 'Stop',
    rerun: 'Rerun',
    rerun_last: 'Rerun last command',
    add_favorite: 'Add to favorites',
    favorites: 'Favorites',
    remove: 'Remove',
    installing: 'Installing…',
    install_chocolatey: 'Install Chocolatey',
    apply: 'Apply',
    cancel: 'Cancel',
    close: 'Close',
    execute: 'Run',
    execute_admin: 'Run (Admin)',
    copy: 'Copy',
    export: 'Export',
    clear: 'Clear',
    results: 'result(s)',
    none: 'None',
    ok: 'OK',
    error: 'Error',
    success: 'Success',
    tab_search: 'Search',
    tab_installed: 'Installed',
    tab_outdated: 'Outdated',
    tab_terminal: 'Terminal',
    // Settings
    settings_title: 'Settings',
    settings_subtitle: 'Themes, default paths and preferences',
    settings_theme: 'Theme',
    theme_fixed: 'Fixed',
    theme_follow: 'Follow Windows',
    theme_custom: 'Custom',
    theme_bg: 'Background',
    theme_cards: 'Cards',
    theme_border: 'Border',
    theme_text: 'Text',
    theme_text_muted: 'Secondary text',
    theme_icons: 'Icons',
    theme_accent_start: 'Accent start',
    theme_accent_end: 'Accent end',
    pick_color_accent_start: 'Pick accent start color',
    pick_color_accent_end: 'Pick accent end color',
    reset: 'Reset',
    preview: 'Preview',
    export_preset: 'Export preset',
    import_preset: 'Import preset',
    default_paths: 'Default paths',
    browse: 'Browse…',
    conversions_dir: 'Conversions folder',
    apply_paths_on_startup: 'Apply these paths on startup (if set)',
    preferences: 'Preferences',
    lock_sidebar: 'Lock sidebar',
    save_and_apply: 'Save and apply',
    // Dashboard quick actions
    dashboard_tagline: 'System control center • Tools, analytics, portables',
    quick_portable_apps: 'Portable Apps',
    quick_godmode: 'God Mode',
    quick_chocolatey: 'Chocolatey',
    quick_converter: 'Converter',
    // PortableApps
    import_exe: 'Import .EXE',
    no_portable_apps: 'No portable app found',
    launch_log: 'Launch log',
    api_unavailable: 'Electron API unavailable',
    choco_not_installed: 'Chocolatey is not installed',
    choco_install_hint: 'Click to install it as administrator',
    wu_pause_planned: 'Windows Update (scheduled pause)',
    duration: 'Duration',
    schedule: 'Schedule',
    no_drives: 'No drives detected',
    action_log: 'Action log',
    export_csv: 'Export CSV',
    no_exclusions: 'No exclusions',
  },
}

export function getLang(): Lang {
  try {
    const ls = localStorage.getItem('vw_lang')
    return ls === 'en' ? 'en' : 'fr'
  } catch {
    return 'fr'
  }
}

export function setLang(lang: Lang) {
  try {
    localStorage.setItem('vw_lang', lang)
  } catch {}
}

export function t(key: string): string {
  const lang = getLang()
  return dict[lang][key] ?? dict['fr'][key] ?? key
}
